[
  {
    "objectID": "posts/postttt/index.html",
    "href": "posts/postttt/index.html",
    "title": "gr√°fico X e Y",
    "section": "",
    "text": "neste exercicio est√° como desenvolver um codigo em python que consulta um grafico com multiplos pontos x e y,a explica√ß√£o est√° ao logno do codigo nos coment√°rios dele.\n\nfrom plotnine import ggplot, aes, geom_point, geom_abline\nimport pandas as pd\nimport numpy as np\n\n# ---- Leitura dos arquivos ----\nwith open(\"X.txt\") as f:\n    valores_x = [float(line.strip()) for line in f]\n\nwith open(\"Y.txt\") as f:\n    valores_y = [float(line.strip()) for line in f]\n\ndf = pd.DataFrame({\"x\": valores_x, \"y\": valores_y})\n\n# ---- Regress√£o linear ----\nb, a = np.polyfit(df['x'], df['y'], 1)\n\n# ---- Gera√ß√£o do gr√°fico ----\nplot = (\n    ggplot(df, aes(\"x\", \"y\"))\n    + geom_point()\n    + geom_abline(intercept=a, slope=b)\n)\n\n# ---- Salvar corretamente ----\nplot.save(\"grafico.png\", dpi=300, width=6, height=4)\n\nprint(\"Gr√°fico gerado com sucesso! Arquivo salvo como grafico.png\")\n\n/home/codespace/.python/current/lib/python3.12/site-packages/plotnine/ggplot.py:623: PlotnineWarning: Saving 6 x 4 in image.\n/home/codespace/.python/current/lib/python3.12/site-packages/plotnine/ggplot.py:624: PlotnineWarning: Filename: grafico.png\n\n\nGr√°fico gerado com sucesso! Arquivo salvo como grafico.png\n\n\n\n\n\nalt"
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Cota√ß√£o do dolar",
    "section": "",
    "text": "neste exercicio est√° como desenvolver um codigo em python que consulta a varia√ß√£o do dolar,a explica√ß√£o est√° ao logno do codigo nos coment√°rios dele.\n\nimport calendar  # Biblioteca usada para lidar com dados de calend√°rio, como descobrir o √∫ltimo dia do m√™s\nfrom datetime import datetime, timedelta  # datetime manipula datas; timedelta permite somar/subtrair dias\nimport requests  # Usado para fazer requisi√ß√µes HTTP (acessar APIs externas)\nimport plotly.express as px  # Biblioteca para criar gr√°ficos interativos\nimport pandas as pd  # Usada para trabalhar com tabelas e DataFrames\n\ndef consultar_cotacao(mes_ano):\n    \"\"\"\n    mes_ano: string no formato MMYYYY, como '022007'\n    A fun√ß√£o consulta todas as cota√ß√µes do d√≥lar daquele m√™s no Banco Central\n    Preenche fins de semana e feriados usando a √∫ltima cota√ß√£o √∫til\n    Gera um gr√°fico e devolve os dados em forma de dicion√°rio\n    \"\"\"\n\n    # --------------------------------------------------------------------------------------\n    # 1. CRIA A DATA INICIAL E FINAL DO M√äS\n    # --------------------------------------------------------------------------------------\n\n    # Converte a string no formato \"MMYYYY\" para um objeto datetime representando o primeiro dia do m√™s\n    inicio_mes = datetime.strptime(mes_ano, \"%m%Y\")\n\n    # Descobre automaticamente quantos dias aquele m√™s tem e cria a data do √∫ltimo dia do m√™s\n    fim_mes = inicio_mes.replace(day=calendar.monthrange(inicio_mes.year, inicio_mes.month)[1])\n    # Exemplo: fevereiro de 2007 ‚Üí √∫ltimo dia √© 28 (ou 29 em ano bissexto)\n\n    # Formata as datas para o padr√£o exigido pela API do Banco Central (MM-DD-YYYY)\n    data_ini = inicio_mes.strftime(\"%m-%d-%Y\")\n    data_fin = fim_mes.strftime(\"%m-%d-%Y\")\n\n    # --------------------------------------------------------------------------------------\n    # 2. MONTA A URL DA API DO BANCO CENTRAL (PTAX)\n    # --------------------------------------------------------------------------------------\n\n    # A API PTAX exige que passemos o intervalo de datas, ent√£o constru√≠mos a URL completa com string formatada\n    endpoint = (\n        \"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/\"\n        \"CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)?\"\n        f\"@dataInicial='{data_ini}'&@dataFinalCotacao='{data_fin}'&$format=json\"\n    )\n\n    # Faz a requisi√ß√£o HTTP GET para a API e converte a resposta para JSON\n    resposta = requests.get(endpoint).json()\n\n    # --------------------------------------------------------------------------------------\n    # 3. ORGANIZA OS DADOS RECEBIDOS EM UM DICION√ÅRIO POR DIA\n    # --------------------------------------------------------------------------------------\n\n    tabela_cotacoes = {}  \n    # Estrutura que teremos:\n    # { data: (valor_compra, valor_venda) }\n\n    for registro in resposta[\"value\"]:\n        # Cada registro tem data e valores da cota√ß√£o\n\n        # Converte a string de data e hora da API para objeto datetime, depois extrai apenas a data (YYYY-MM-DD)\n        data_registro = datetime.strptime(registro[\"dataHoraCotacao\"], \"%Y-%m-%d %H:%M:%S.%f\").date()\n\n        # Valor da cota√ß√£o no momento registrado\n        valor_compra = registro[\"cotacaoCompra\"]\n        valor_venda = registro[\"cotacaoVenda\"]\n\n        # Armazena no dicion√°rio usando a data como chave\n        tabela_cotacoes[data_registro] = (valor_compra, valor_venda)\n\n    # --------------------------------------------------------------------------------------\n    # 4. FUN√á√ÉO INTERNA PARA ACHAR O √öLTIMO DIA √öTIL\n    # --------------------------------------------------------------------------------------\n\n    def buscar_ultimo_util(dia_busca):\n        \"\"\"\n        Usa o dia atual e volta para tr√°s at√© encontrar um dia com cota√ß√£o dispon√≠vel.\n        Isso √© necess√°rio porque em fins de semana e feriados a bolsa n√£o funciona.\n        \"\"\"\n\n        # Come√ßa voltando 1 dia antes do dia pesquisado\n        dia_busca -= timedelta(days=1)\n\n        # Continua voltando enquanto ainda est√° no m√™s consultado\n        while dia_busca &gt;= inicio_mes.date():\n\n            # Se esse dia estiver no dicion√°rio, significa que teve cota√ß√£o\n            if dia_busca in tabela_cotacoes:\n                return tabela_cotacoes[dia_busca]\n\n            # Caso contr√°rio continua voltando mais um dia\n            dia_busca -= timedelta(days=1)\n\n        # Caso n√£o encontre nada (o que √© extremamente raro), retorna valores vazios\n        return (None, None)\n\n    # --------------------------------------------------------------------------------------\n    # 5. MONTA A LISTA FINAL COM TODAS AS DATAS DO M√äS\n    # --------------------------------------------------------------------------------------\n\n    linhas_processadas = []  # Guarda cada linha com data, compra e venda\n    data_atual = inicio_mes.date()\n\n    # Loop para percorrer TODOS os dias do m√™s, incluindo finais de semana\n    while data_atual &lt;= fim_mes.date():\n\n        # Se o dia tem cota√ß√£o real, usamos ela\n        if data_atual in tabela_cotacoes:\n            compra, venda = tabela_cotacoes[data_atual]\n\n        else:\n            # Se n√£o tem (feriado ou final de semana), pegamos a √∫ltima cota√ß√£o conhecida antes dessa\n            compra, venda = buscar_ultimo_util(data_atual)\n\n        # Adiciona o registro formatado √† lista\n        linhas_processadas.append({\n            \"Data\": data_atual.strftime(\"%d/%m/%Y\"),  # Data formatada para o gr√°fico\n            \"Compra\": compra,\n            \"Venda\": venda,\n        })\n\n        # Avan√ßa para o pr√≥ximo dia\n        data_atual += timedelta(days=1)\n\n    # --------------------------------------------------------------------------------------\n    # 6. TRANSFORMA A LISTA EM UM DATAFRAME\n    # --------------------------------------------------------------------------------------\n\n    df = pd.DataFrame(linhas_processadas)\n    # Isso facilita gerar gr√°ficos e trabalhar com os dados\n\n    # --------------------------------------------------------------------------------------\n    # 7. GERA O GR√ÅFICO COM O PLOTLY\n    # --------------------------------------------------------------------------------------\n\n    fig = px.line(\n        df,                   # Fonte de dados\n        x=\"Data\",             # Eixo X ‚Üí dia do m√™s\n        y=[\"Compra\", \"Venda\"],# Eixo Y ‚Üí duas linhas no mesmo gr√°fico\n        title=f\"Cota√ß√£o do D√≥lar de {inicio_mes.strftime('%d/%m/%Y')} a {fim_mes.strftime('%d/%m/%Y')}\",\n        labels={\n            \"value\": \"Valor (R$)\", \n            \"variable\": \"Tipo de Cota√ß√£o\"  # Nome da legenda\n        },\n        color_discrete_map={  # Define as cores das duas linhas\n            \"Compra\": \"green\",\n            \"Venda\": \"red\"\n        }\n    )\n\n    # Usa um tema visual mais limpo\n    fig.update_layout(template=\"plotly_white\")\n\n    # Exibe o gr√°fico\n    fig.show()\n\n    # --------------------------------------------------------------------------------------\n    # 8. RETORNA OS DADOS DE FORMA ORGANIZADA\n    # --------------------------------------------------------------------------------------\n\n    return {\n        \"Per√≠odo consultado\": f\"{inicio_mes.strftime('%d/%m/%Y')} at√© {fim_mes.strftime('%d/%m/%Y')}\",\n        \"Cota√ß√µes\": linhas_processadas\n    }\n\n# Chamada da fun√ß√£o, apenas para exemplo\nprint(consultar_cotacao(\"022007\"))\n#escolhi esta data pois meu RA 228766 n√£o est√° na tabela que o professor mandou, ent√£o coloquei uma de minha escolha\n\n                            \n                                            \n\n\n{'Per√≠odo consultado': '01/02/2007 at√© 28/02/2007', 'Cota√ß√µes': [{'Data': '01/02/2007', 'Compra': 2.1085, 'Venda': 2.1093}, {'Data': '02/02/2007', 'Compra': 2.0974, 'Venda': 2.0982}, {'Data': '03/02/2007', 'Compra': 2.0974, 'Venda': 2.0982}, {'Data': '04/02/2007', 'Compra': 2.0974, 'Venda': 2.0982}, {'Data': '05/02/2007', 'Compra': 2.0956, 'Venda': 2.0964}, {'Data': '06/02/2007', 'Compra': 2.0825, 'Venda': 2.0833}, {'Data': '07/02/2007', 'Compra': 2.0844, 'Venda': 2.0852}, {'Data': '08/02/2007', 'Compra': 2.0943, 'Venda': 2.0951}, {'Data': '09/02/2007', 'Compra': 2.1025, 'Venda': 2.1033}, {'Data': '10/02/2007', 'Compra': 2.1025, 'Venda': 2.1033}, {'Data': '11/02/2007', 'Compra': 2.1025, 'Venda': 2.1033}, {'Data': '12/02/2007', 'Compra': 2.1132, 'Venda': 2.114}, {'Data': '13/02/2007', 'Compra': 2.108, 'Venda': 2.1088}, {'Data': '14/02/2007', 'Compra': 2.0992, 'Venda': 2.1}, {'Data': '15/02/2007', 'Compra': 2.0888, 'Venda': 2.0896}, {'Data': '16/02/2007', 'Compra': 2.0905, 'Venda': 2.0913}, {'Data': '17/02/2007', 'Compra': 2.0905, 'Venda': 2.0913}, {'Data': '18/02/2007', 'Compra': 2.0905, 'Venda': 2.0913}, {'Data': '19/02/2007', 'Compra': 2.0905, 'Venda': 2.0913}, {'Data': '20/02/2007', 'Compra': 2.0905, 'Venda': 2.0913}, {'Data': '21/02/2007', 'Compra': 2.0794, 'Venda': 2.0802}, {'Data': '22/02/2007', 'Compra': 2.0758, 'Venda': 2.0766}, {'Data': '23/02/2007', 'Compra': 2.086, 'Venda': 2.0868}, {'Data': '24/02/2007', 'Compra': 2.086, 'Venda': 2.0868}, {'Data': '25/02/2007', 'Compra': 2.086, 'Venda': 2.0868}, {'Data': '26/02/2007', 'Compra': 2.0855, 'Venda': 2.0863}, {'Data': '27/02/2007', 'Compra': 2.1091, 'Venda': 2.1099}, {'Data': '28/02/2007', 'Compra': 2.1174, 'Venda': 2.1182}]}"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "myblog",
    "section": "",
    "text": "Cota√ß√£o do dolar\n\n\n\nprogramation\n\nqueronota10\n\n\n\n\n\n\n\n\n\nNov 24, 2025\n\n\nMurilo Moraes\n\n\n\n\n\n\n\n\n\n\n\n\ngr√°fico X e Y\n\n\n\nprogramation\n\nqueronota10\n\n\n\n\n\n\n\n\n\nNov 24, 2025\n\n\nMurilo Moraes\n\n\n\n\n\n\n\n\n\n\n\n\nconsulta de linhas de √¥nibus\n\n\n\nprogramation\n\n\n\n\n\n\n\n\n\nNov 21, 2025\n\n\nMurilo Moraes\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "consulta de linhas de √¥nibus",
    "section": "",
    "text": "neste post voc√™ vera como √© um programa que consulta linhas de √¥nibus em uma mapa interativo! onde o codigo inteiro est√° explicado!\n\nimport requests            # Biblioteca para fazer requisi√ß√µes HTTP\nimport folium              # Usada para criar mapas interativos e marcadores\nimport os                  # Usada para acessar vari√°veis de ambiente (como o token)\nfrom dotenv import load_dotenv  # Carrega vari√°veis do arquivo .env\n\n# ----------------------------------------------------------------------------\n# 1. CARREGAMENTO DO TOKEN DA API\n# ----------------------------------------------------------------------------\n\nload_dotenv()  # L√™ o arquivo .env e insere suas vari√°veis dentro de os.environ\n\nTOKEN = os.getenv(\"SPTRANS_TOKEN\")  \n# Pegamos SOMENTE a vari√°vel do .env (conforme solicitado)\n# Esta vari√°vel n√£o pode ser renomeada para n√£o quebrar a l√≥gica do usu√°rio\n\nCOD_LINHA = 1198\n\n# C√≥digo da linha consultada. \n\nprint(f\"Iniciando consulta da linha {COD_LINHA}...\")\n\n# ----------------------------------------------------------------------------\n# 2. AUTENTICA√á√ÉO NA API DO SPTRANS (Olho Vivo)\n# ----------------------------------------------------------------------------\n\nsessao = requests.Session()  \n# Criamos uma sess√£o HTTP, que mant√©m cookies entre requisi√ß√µes\n\nresposta_login = sessao.post(\n    f\"http://api.olhovivo.sptrans.com.br/v2.1/Login/Autenticar?token={TOKEN}\"\n)\n# A API exige um POST com o token na URL para autenticar a sess√£o\n\nif resposta_login.text != \"true\":\n    # A API retorna texto simples \"true\" se funcionar; qualquer outra coisa = erro\n    print(\"Falha ao autenticar. Verifique o arquivo .env e o token informado.\")\n    exit()  # Encerra o programa imediatamente\n\n# ----------------------------------------------------------------------------\n# 3. MONTAGEM DAS URLS PARA CAPTURA DE PARADAS E POSI√á√ÉO DOS √îNIBUS\n# ----------------------------------------------------------------------------\n\nurl_coleta_paradas = (\n    f\"http://api.olhovivo.sptrans.com.br/v2.1/Parada/BuscarParadasPorLinha?codigoLinha={COD_LINHA}\"\n)\n# Endpoint da API que devolve todas as paradas da linha consultada\n\nurl_coleta_veiculos = (\n    f\"http://api.olhovivo.sptrans.com.br/v2.1/Posicao/Linha?codigoLinha={COD_LINHA}\"\n)\n# Endpoint que devolve a posi√ß√£o dos √¥nibus em tempo real\n\n# ----------------------------------------------------------------------------\n# 4. CONSULTA DOS DADOS NA API\n# ----------------------------------------------------------------------------\n\ndados_paradas = sessao.get(url_coleta_paradas).json()\n# Lista de paradas contendo nome, lat, lon e infos extras\n\ndados_posicoes = sessao.get(url_coleta_veiculos).json()\n# Resultado bruto com v√°rias informa√ß√µes, incluindo 'vs' que lista ve√≠culos\n\nonibus_ativos = dados_posicoes.get(\"vs\", [])\n# \"vs\" = ve√≠culos ‚Üí caso n√£o exista, devolve lista vazia\n\n# ----------------------------------------------------------------------------\n# 5. GERA√á√ÉO DO MAPA INTERATIVO\n# ----------------------------------------------------------------------------\n\nif dados_paradas:\n    # Se houver paradas encontradas...\n    \n    # --------------------------\n    # CENTRALIZA O MAPA NA 1¬™ PARADA\n    # --------------------------\n    pos_inicial_lat = dados_paradas[0][\"py\"]  # Latitude da primeira parada\n    pos_inicial_lon = dados_paradas[0][\"px\"]  # Longitude da primeira parada\n    \n    mapa = folium.Map(location=[pos_inicial_lat, pos_inicial_lon], zoom_start=13)\n    # Cria o mapa centralizado na primeira parada da linha\n\n    # --------------------------\n    # INSERE TODAS AS PARADAS (MARCADOR AZUL)\n    # --------------------------\n    for parada in dados_paradas:\n        folium.Marker(\n            location=[parada[\"py\"], parada[\"px\"]],\n            popup=f\"Parada: {parada['np']}\",  # 'np' √© o nome da parada\n            icon=folium.Icon(color=\"blue\", icon=\"info-sign\")\n        ).add_to(mapa)\n\n    # --------------------------\n    # INSERE TODOS OS √îNIBUS ATIVOS (MARCADOR VERMELHO)\n    # --------------------------\n    if onibus_ativos:\n        for veiculo in onibus_ativos:\n            folium.Marker(\n                location=[veiculo[\"py\"], veiculo[\"px\"]],\n                popup=f\"Prefixo: {veiculo['p']}\",  # 'p' = prefixo do √¥nibus\n                icon=folium.Icon(color=\"red\", icon=\"bus\", prefix=\"fa\")\n            ).add_to(mapa)\n\n        print(f\"Mapa gerado com sucesso! {len(onibus_ativos)} √¥nibus encontrados.\")\n    else:\n        print(\"Nenhum √¥nibus encontrado rodando no momento.\")\n\n    # --------------------------\n    # SALVA O MAPA EM ARQUIVO HTML\n    # --------------------------\n    arquivo_saida = \"mapa_linha_695Y.html\"\n    mapa.save(arquivo_saida)\n\n    print(f\"Arquivo '{arquivo_saida}' criado com sucesso!\")\n\nelse:\n    print(\"Erro ao carregar paradas da linha. A API pode estar inst√°vel.\")\n\nIniciando consulta da linha 1198...\nNenhum √¥nibus encontrado rodando no momento.\nArquivo 'mapa_linha_695Y.html' criado com sucesso!\n\n\nüîó Abrir mapa interativo da linha 695Y"
  }
]